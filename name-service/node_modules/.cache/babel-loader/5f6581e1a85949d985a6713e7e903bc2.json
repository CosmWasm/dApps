{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from './FieldContext';\nimport Field from './Field';\nimport { move as _move, getNamePath } from './utils/valueUtil';\n\nvar List = function List(_ref) {\n  var name = _ref.name,\n      children = _ref.children;\n  var context = React.useContext(FieldContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current; // User should not pass `children` as other type.\n\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n\n  var parentPrefixName = getNamePath(context.prefixName) || [];\n  var prefixName = [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n\n    if (source === 'internal') {\n      return false;\n    }\n\n    return prevValue !== nextValue;\n  };\n\n  return React.createElement(FieldContext.Provider, {\n    value: _objectSpread({}, context, {\n      prefixName: prefixName\n    })\n  }, React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate\n  }, function (_ref3) {\n    var _ref3$value = _ref3.value,\n        value = _ref3$value === void 0 ? [] : _ref3$value,\n        onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n\n\n    var operations = {\n      add: function add(defaultValue) {\n        // Mapping keys\n        keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n        keyManager.id += 1;\n        var newValue = getNewValue();\n        onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue();\n        var indexSet = new Set(Array.isArray(index) ? index : [index]);\n\n        if (indexSet.size <= 0) {\n          return;\n        }\n\n        keyManager.keys = keyManager.keys.filter(function (_, keysIndex) {\n          return !indexSet.has(keysIndex);\n        }); // Trigger store change\n\n        onChange(newValue.filter(function (_, valueIndex) {\n          return !indexSet.has(valueIndex);\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n\n        keyManager.keys = _move(keyManager.keys, from, to); // Trigger store change\n\n        onChange(_move(newValue, from, to));\n      }\n    };\n    return children(value.map(function (__, index) {\n      var key = keyManager.keys[index];\n\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations);\n  }));\n};\n\nexport default List;","map":{"version":3,"sources":["/home/abefernan/cosmwasm/dApps/node_modules/rc-field-form/es/List.js"],"names":["_defineProperty","_toConsumableArray","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","React","warning","FieldContext","Field","move","_move","getNamePath","List","_ref","name","children","context","useContext","keyRef","useRef","id","keyManager","current","parentPrefixName","prefixName","concat","shouldUpdate","prevValue","nextValue","_ref2","createElement","Provider","value","_ref3","_ref3$value","onChange","getFieldValue","getNewValue","values","operations","add","defaultValue","newValue","remove","index","indexSet","Set","Array","isArray","size","_","keysIndex","has","valueIndex","from","to","map","__","undefined","isListField"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from 'react';\nimport warning from \"rc-util/es/warning\";\nimport FieldContext from './FieldContext';\nimport Field from './Field';\nimport { move as _move, getNamePath } from './utils/valueUtil';\n\nvar List = function List(_ref) {\n  var name = _ref.name,\n      children = _ref.children;\n  var context = React.useContext(FieldContext);\n  var keyRef = React.useRef({\n    keys: [],\n    id: 0\n  });\n  var keyManager = keyRef.current; // User should not pass `children` as other type.\n\n  if (typeof children !== 'function') {\n    warning(false, 'Form.List only accepts function as children.');\n    return null;\n  }\n\n  var parentPrefixName = getNamePath(context.prefixName) || [];\n  var prefixName = [].concat(_toConsumableArray(parentPrefixName), _toConsumableArray(getNamePath(name)));\n\n  var shouldUpdate = function shouldUpdate(prevValue, nextValue, _ref2) {\n    var source = _ref2.source;\n\n    if (source === 'internal') {\n      return false;\n    }\n\n    return prevValue !== nextValue;\n  };\n\n  return React.createElement(FieldContext.Provider, {\n    value: _objectSpread({}, context, {\n      prefixName: prefixName\n    })\n  }, React.createElement(Field, {\n    name: [],\n    shouldUpdate: shouldUpdate\n  }, function (_ref3) {\n    var _ref3$value = _ref3.value,\n        value = _ref3$value === void 0 ? [] : _ref3$value,\n        onChange = _ref3.onChange;\n    var getFieldValue = context.getFieldValue;\n\n    var getNewValue = function getNewValue() {\n      var values = getFieldValue(prefixName || []);\n      return values || [];\n    };\n    /**\n     * Always get latest value in case user update fields by `form` api.\n     */\n\n\n    var operations = {\n      add: function add(defaultValue) {\n        // Mapping keys\n        keyManager.keys = [].concat(_toConsumableArray(keyManager.keys), [keyManager.id]);\n        keyManager.id += 1;\n        var newValue = getNewValue();\n        onChange([].concat(_toConsumableArray(newValue), [defaultValue]));\n      },\n      remove: function remove(index) {\n        var newValue = getNewValue();\n        var indexSet = new Set(Array.isArray(index) ? index : [index]);\n\n        if (indexSet.size <= 0) {\n          return;\n        }\n\n        keyManager.keys = keyManager.keys.filter(function (_, keysIndex) {\n          return !indexSet.has(keysIndex);\n        }); // Trigger store change\n\n        onChange(newValue.filter(function (_, valueIndex) {\n          return !indexSet.has(valueIndex);\n        }));\n      },\n      move: function move(from, to) {\n        if (from === to) {\n          return;\n        }\n\n        var newValue = getNewValue(); // Do not handle out of range\n\n        if (from < 0 || from >= newValue.length || to < 0 || to >= newValue.length) {\n          return;\n        }\n\n        keyManager.keys = _move(keyManager.keys, from, to); // Trigger store change\n\n        onChange(_move(newValue, from, to));\n      }\n    };\n    return children(value.map(function (__, index) {\n      var key = keyManager.keys[index];\n\n      if (key === undefined) {\n        keyManager.keys[index] = keyManager.id;\n        key = keyManager.keys[index];\n        keyManager.id += 1;\n      }\n\n      return {\n        name: index,\n        key: key,\n        isListField: true\n      };\n    }), operations);\n  }));\n};\n\nexport default List;"]},"metadata":{},"sourceType":"module"}