{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _reactDom = require(\"react-dom\");\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _toArray = _interopRequireDefault(require(\"rc-util/lib/Children/toArray\")); // We only handle element & text node.\n\n\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\nvar ellipsisContainer;\nvar wrapperStyle = {\n  padding: 0,\n  margin: 0,\n  display: 'inline',\n  lineHeight: 'inherit'\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  var match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\n\nfunction styleToString(style) {\n  // There are some different behavior between Firefox & Chrome.\n  // We have to handle this ourself.\n  var styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(function (name) {\n    return \"\".concat(name, \": \").concat(style.getPropertyValue(name), \";\");\n  }).join('');\n}\n\nfunction mergeChildren(children) {\n  var childList = [];\n  children.forEach(function (child) {\n    var prevChild = childList[childList.length - 1];\n\n    if (typeof child === 'string' && typeof prevChild === 'string') {\n      childList[childList.length - 1] += child;\n    } else {\n      childList.push(child);\n    }\n  });\n  return childList;\n}\n\nvar _default = function _default(originEle, option, content, fixedContent, ellipsisStr) {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement('div');\n    ellipsisContainer.setAttribute('aria-hidden', 'true');\n    document.body.appendChild(ellipsisContainer);\n  }\n\n  var rows = option.rows,\n      _option$suffix = option.suffix,\n      suffix = _option$suffix === void 0 ? '' : _option$suffix; // Get origin style\n\n  var originStyle = window.getComputedStyle(originEle);\n  var originCSS = styleToString(originStyle);\n  var lineHeight = pxToNumber(originStyle.lineHeight);\n  var maxHeight = Math.round(lineHeight * (rows + 1) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom)); // Set shadow\n\n  ellipsisContainer.setAttribute('style', originCSS);\n  ellipsisContainer.style.position = 'fixed';\n  ellipsisContainer.style.left = '0';\n  ellipsisContainer.style.height = 'auto';\n  ellipsisContainer.style.minHeight = 'auto';\n  ellipsisContainer.style.maxHeight = 'auto';\n  ellipsisContainer.style.top = '-999999px';\n  ellipsisContainer.style.zIndex = '-1000'; // clean up css overflow\n\n  ellipsisContainer.style.textOverflow = 'clip';\n  ellipsisContainer.style.whiteSpace = 'normal';\n  ellipsisContainer.style.webkitLineClamp = 'none'; // Render in the fake container\n\n  var contentList = mergeChildren((0, _toArray[\"default\"])(content));\n  (0, _reactDom.render)( /*#__PURE__*/React.createElement(\"div\", {\n    style: wrapperStyle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, contentList, suffix), /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, fixedContent)), ellipsisContainer); // wrap in an div for old version react\n  // Check if ellipsis in measure div is height enough for content\n\n  function inRange() {\n    return ellipsisContainer.offsetHeight < maxHeight;\n  } // Skip ellipsis if already match\n\n\n  if (inRange()) {\n    (0, _reactDom.unmountComponentAtNode)(ellipsisContainer);\n    return {\n      content: content,\n      text: ellipsisContainer.innerHTML,\n      ellipsis: false\n    };\n  } // We should clone the childNode since they're controlled by React and we can't reuse it without warning\n\n\n  var childNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes).filter(function (_ref) {\n    var nodeType = _ref.nodeType;\n    return nodeType !== COMMENT_NODE;\n  });\n  var fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\n  (0, _reactDom.unmountComponentAtNode)(ellipsisContainer); // ========================= Find match ellipsis content =========================\n\n  var ellipsisChildren = [];\n  ellipsisContainer.innerHTML = ''; // Create origin content holder\n\n  var ellipsisContentHolder = document.createElement('span');\n  ellipsisContainer.appendChild(ellipsisContentHolder);\n  var ellipsisTextNode = document.createTextNode(ellipsisStr + suffix);\n  ellipsisContentHolder.appendChild(ellipsisTextNode);\n  fixedNodes.forEach(function (childNode) {\n    ellipsisContainer.appendChild(childNode);\n  }); // Append before fixed nodes\n\n  function appendChildNode(node) {\n    ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\n  } // Get maximum text\n\n\n  function measureText(textNode, fullText) {\n    var startLoc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var endLoc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : fullText.length;\n    var lastSuccessLoc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var midLoc = Math.floor((startLoc + endLoc) / 2);\n    var currentText = fullText.slice(0, midLoc);\n    textNode.textContent = currentText;\n\n    if (startLoc >= endLoc - 1) {\n      // Loop when step is small\n      for (var step = endLoc; step >= startLoc; step -= 1) {\n        var currentStepText = fullText.slice(0, step);\n        textNode.textContent = currentStepText;\n\n        if (inRange() || !currentStepText) {\n          return step === fullText.length ? {\n            finished: false,\n            reactNode: fullText\n          } : {\n            finished: true,\n            reactNode: currentStepText\n          };\n        }\n      }\n    }\n\n    if (inRange()) {\n      return measureText(textNode, fullText, midLoc, endLoc, midLoc);\n    }\n\n    return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\n  }\n\n  function measureNode(childNode, index) {\n    var type = childNode.nodeType;\n\n    if (type === ELEMENT_NODE) {\n      // We don't split element, it will keep if whole element can be displayed.\n      appendChildNode(childNode);\n\n      if (inRange()) {\n        return {\n          finished: false,\n          reactNode: contentList[index]\n        };\n      } // Clean up if can not pull in\n\n\n      ellipsisContentHolder.removeChild(childNode);\n      return {\n        finished: true,\n        reactNode: null\n      };\n    }\n\n    if (type === TEXT_NODE) {\n      var fullText = childNode.textContent || '';\n      var textNode = document.createTextNode(fullText);\n      appendChildNode(textNode);\n      return measureText(textNode, fullText);\n    } // Not handle other type of content\n    // PS: This code should not be attached after react 16\n\n\n    return {\n      finished: false,\n      reactNode: null\n    };\n  }\n\n  childNodes.some(function (childNode, index) {\n    var _measureNode = measureNode(childNode, index),\n        finished = _measureNode.finished,\n        reactNode = _measureNode.reactNode;\n\n    if (reactNode) {\n      ellipsisChildren.push(reactNode);\n    }\n\n    return finished;\n  });\n  return {\n    content: ellipsisChildren,\n    text: ellipsisContainer.innerHTML,\n    ellipsis: true\n  };\n};\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/home/abefernan/cosmwasm/dApps/node_modules/antd/lib/typography/util.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","_reactDom","React","_toArray","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","ellipsisContainer","wrapperStyle","padding","margin","display","lineHeight","pxToNumber","match","Number","styleToString","style","styleNames","Array","prototype","slice","apply","map","name","concat","getPropertyValue","join","mergeChildren","children","childList","forEach","child","prevChild","length","push","_default","originEle","option","content","fixedContent","ellipsisStr","document","createElement","setAttribute","body","appendChild","rows","_option$suffix","suffix","originStyle","window","getComputedStyle","originCSS","maxHeight","Math","round","paddingTop","paddingBottom","position","left","height","minHeight","top","zIndex","textOverflow","whiteSpace","webkitLineClamp","contentList","render","inRange","offsetHeight","unmountComponentAtNode","text","innerHTML","ellipsis","childNodes","cloneNode","filter","_ref","nodeType","fixedNodes","ellipsisChildren","ellipsisContentHolder","ellipsisTextNode","createTextNode","childNode","appendChildNode","node","insertBefore","measureText","textNode","fullText","startLoc","arguments","undefined","endLoc","lastSuccessLoc","midLoc","floor","currentText","textContent","step","currentStepText","finished","reactNode","measureNode","index","type","removeChild","some","_measureNode"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _reactDom = require(\"react-dom\");\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _toArray = _interopRequireDefault(require(\"rc-util/lib/Children/toArray\"));\n\n// We only handle element & text node.\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\nvar ellipsisContainer;\nvar wrapperStyle = {\n  padding: 0,\n  margin: 0,\n  display: 'inline',\n  lineHeight: 'inherit'\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  var match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\n\nfunction styleToString(style) {\n  // There are some different behavior between Firefox & Chrome.\n  // We have to handle this ourself.\n  var styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(function (name) {\n    return \"\".concat(name, \": \").concat(style.getPropertyValue(name), \";\");\n  }).join('');\n}\n\nfunction mergeChildren(children) {\n  var childList = [];\n  children.forEach(function (child) {\n    var prevChild = childList[childList.length - 1];\n\n    if (typeof child === 'string' && typeof prevChild === 'string') {\n      childList[childList.length - 1] += child;\n    } else {\n      childList.push(child);\n    }\n  });\n  return childList;\n}\n\nvar _default = function _default(originEle, option, content, fixedContent, ellipsisStr) {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement('div');\n    ellipsisContainer.setAttribute('aria-hidden', 'true');\n    document.body.appendChild(ellipsisContainer);\n  }\n\n  var rows = option.rows,\n      _option$suffix = option.suffix,\n      suffix = _option$suffix === void 0 ? '' : _option$suffix; // Get origin style\n\n  var originStyle = window.getComputedStyle(originEle);\n  var originCSS = styleToString(originStyle);\n  var lineHeight = pxToNumber(originStyle.lineHeight);\n  var maxHeight = Math.round(lineHeight * (rows + 1) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom)); // Set shadow\n\n  ellipsisContainer.setAttribute('style', originCSS);\n  ellipsisContainer.style.position = 'fixed';\n  ellipsisContainer.style.left = '0';\n  ellipsisContainer.style.height = 'auto';\n  ellipsisContainer.style.minHeight = 'auto';\n  ellipsisContainer.style.maxHeight = 'auto';\n  ellipsisContainer.style.top = '-999999px';\n  ellipsisContainer.style.zIndex = '-1000'; // clean up css overflow\n\n  ellipsisContainer.style.textOverflow = 'clip';\n  ellipsisContainer.style.whiteSpace = 'normal';\n  ellipsisContainer.style.webkitLineClamp = 'none'; // Render in the fake container\n\n  var contentList = mergeChildren((0, _toArray[\"default\"])(content));\n  (0, _reactDom.render)( /*#__PURE__*/React.createElement(\"div\", {\n    style: wrapperStyle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, contentList, suffix), /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, fixedContent)), ellipsisContainer); // wrap in an div for old version react\n  // Check if ellipsis in measure div is height enough for content\n\n  function inRange() {\n    return ellipsisContainer.offsetHeight < maxHeight;\n  } // Skip ellipsis if already match\n\n\n  if (inRange()) {\n    (0, _reactDom.unmountComponentAtNode)(ellipsisContainer);\n    return {\n      content: content,\n      text: ellipsisContainer.innerHTML,\n      ellipsis: false\n    };\n  } // We should clone the childNode since they're controlled by React and we can't reuse it without warning\n\n\n  var childNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes).filter(function (_ref) {\n    var nodeType = _ref.nodeType;\n    return nodeType !== COMMENT_NODE;\n  });\n  var fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\n  (0, _reactDom.unmountComponentAtNode)(ellipsisContainer); // ========================= Find match ellipsis content =========================\n\n  var ellipsisChildren = [];\n  ellipsisContainer.innerHTML = ''; // Create origin content holder\n\n  var ellipsisContentHolder = document.createElement('span');\n  ellipsisContainer.appendChild(ellipsisContentHolder);\n  var ellipsisTextNode = document.createTextNode(ellipsisStr + suffix);\n  ellipsisContentHolder.appendChild(ellipsisTextNode);\n  fixedNodes.forEach(function (childNode) {\n    ellipsisContainer.appendChild(childNode);\n  }); // Append before fixed nodes\n\n  function appendChildNode(node) {\n    ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\n  } // Get maximum text\n\n\n  function measureText(textNode, fullText) {\n    var startLoc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var endLoc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : fullText.length;\n    var lastSuccessLoc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var midLoc = Math.floor((startLoc + endLoc) / 2);\n    var currentText = fullText.slice(0, midLoc);\n    textNode.textContent = currentText;\n\n    if (startLoc >= endLoc - 1) {\n      // Loop when step is small\n      for (var step = endLoc; step >= startLoc; step -= 1) {\n        var currentStepText = fullText.slice(0, step);\n        textNode.textContent = currentStepText;\n\n        if (inRange() || !currentStepText) {\n          return step === fullText.length ? {\n            finished: false,\n            reactNode: fullText\n          } : {\n            finished: true,\n            reactNode: currentStepText\n          };\n        }\n      }\n    }\n\n    if (inRange()) {\n      return measureText(textNode, fullText, midLoc, endLoc, midLoc);\n    }\n\n    return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\n  }\n\n  function measureNode(childNode, index) {\n    var type = childNode.nodeType;\n\n    if (type === ELEMENT_NODE) {\n      // We don't split element, it will keep if whole element can be displayed.\n      appendChildNode(childNode);\n\n      if (inRange()) {\n        return {\n          finished: false,\n          reactNode: contentList[index]\n        };\n      } // Clean up if can not pull in\n\n\n      ellipsisContentHolder.removeChild(childNode);\n      return {\n        finished: true,\n        reactNode: null\n      };\n    }\n\n    if (type === TEXT_NODE) {\n      var fullText = childNode.textContent || '';\n      var textNode = document.createTextNode(fullText);\n      appendChildNode(textNode);\n      return measureText(textNode, fullText);\n    } // Not handle other type of content\n    // PS: This code should not be attached after react 16\n\n\n    return {\n      finished: false,\n      reactNode: null\n    };\n  }\n\n  childNodes.some(function (childNode, index) {\n    var _measureNode = measureNode(childNode, index),\n        finished = _measureNode.finished,\n        reactNode = _measureNode.reactNode;\n\n    if (reactNode) {\n      ellipsisChildren.push(reactNode);\n    }\n\n    return finished;\n  });\n  return {\n    content: ellipsisChildren,\n    text: ellipsisContainer.innerHTML,\n    ellipsis: true\n  };\n};\n\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}