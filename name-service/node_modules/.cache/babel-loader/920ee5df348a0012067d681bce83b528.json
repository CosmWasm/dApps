{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n/* eslint-disable no-param-reassign */\n\n\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport RawCSSMotion from \"rc-animate/es/CSSMotion\";\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\nvar CSSMotion = RawCSSMotion;\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null,\n      inMotion: false\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable',\n        inMotion: false\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // Update trigger to tell if is in motion\n\n\n      ['onEnterStart', 'onAppearStart', 'onLeaveStart'].forEach(function (event) {\n        var originFunc = mergedMotion === null || mergedMotion === void 0 ? void 0 : mergedMotion[event];\n\n        mergedMotion[event] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          originFunc === null || originFunc === void 0 ? void 0 : originFunc.apply(void 0, args);\n\n          _this.setState({\n            inMotion: true\n          });\n        };\n      }); // ================== Align ==================\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          visible: mergedPopupVisible,\n          hiddenClassName: hiddenClassName,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status,\n          inMotion = _ref4.inMotion;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n        newState.inMotion = false;\n      } else if (visible !== prevVisible) {\n        newState.inMotion = false;\n\n        if (visible || supportMotion(mergedMotion) && inMotion) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */","map":{"version":3,"sources":["/home/abefernan/cosmwasm/dApps/node_modules/rc-trigger/es/Popup.js"],"names":["_objectWithoutProperties","_defineProperty","_classCallCheck","_createClass","_inherits","_possibleConstructorReturn","_getPrototypeOf","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","sham","Proxy","Date","prototype","toString","call","e","React","Component","raf","Align","composeRef","classNames","RawCSSMotion","PopupInner","getMotion","CSSMotion","supportMotion","motion","motionName","Popup","_Component","_super","_this","state","targetWidth","undefined","targetHeight","status","prevVisible","alignClassName","inMotion","popupRef","createRef","alignRef","nextFrameState","nextFrameId","onAlign","popupDomNode","align","_this$props","props","getClassNameFromAlign","setState","current","forceAlign","onMotionEnd","visible","setStateOnNextFrame","cancelFrameState","submitState","getAlignTarget","_this$props2","point","getRootDomNode","cancel","renderPopupElement","_this$state","_this$props3","prefixCls","className","style","stretch","destroyPopupOnHide","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","children","mergedClassName","hiddenClassName","concat","sizeStyle","indexOf","height","minHeight","width","minWidth","mergedStyle","getZIndexStyle","opacity","mergedMotion","mergedMotionVisible","motionAppear","motionEnter","motionLeave","event","originFunc","_len","args","Array","_key","mergedAlignDisabled","mergedPopupVisible","createElement","assign","removeOnLeave","onEnterEnd","onLeaveEnd","_ref","motionRef","motionStyle","motionClassName","ref","monitorWindowResize","disabled","renderMaskElement","_this$props4","mask","maskMotion","maskTransitionName","maskAnimation","transitionName","animation","_ref2","value","componentDidMount","componentDidUpdate","_this$props5","queue","index","nextStatus","$ele","offsetHeight","offsetWidth","componentWillUnmount","zIndex","render","getDerivedStateFromProps","_ref3","_ref4","newState"],"mappings":"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","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/* eslint-disable no-param-reassign */\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport RawCSSMotion from \"rc-animate/es/CSSMotion\";\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\nvar CSSMotion = RawCSSMotion;\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null,\n      inMotion: false\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable',\n        inMotion: false\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // Update trigger to tell if is in motion\n\n\n      ['onEnterStart', 'onAppearStart', 'onLeaveStart'].forEach(function (event) {\n        var originFunc = mergedMotion === null || mergedMotion === void 0 ? void 0 : mergedMotion[event];\n\n        mergedMotion[event] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          originFunc === null || originFunc === void 0 ? void 0 : originFunc.apply(void 0, args);\n\n          _this.setState({\n            inMotion: true\n          });\n        };\n      }); // ================== Align ==================\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          visible: mergedPopupVisible,\n          hiddenClassName: hiddenClassName,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status,\n          inMotion = _ref4.inMotion;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n        newState.inMotion = false;\n      } else if (visible !== prevVisible) {\n        newState.inMotion = false;\n\n        if (visible || supportMotion(mergedMotion) && inMotion) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */"]},"metadata":{},"sourceType":"module"}