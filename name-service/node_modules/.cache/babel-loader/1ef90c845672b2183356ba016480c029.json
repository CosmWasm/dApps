{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isCheckDisabled = isCheckDisabled;\nexports.conductCheck = conductCheck;\n\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n\nfunction removeFromCheckedKeys(halfCheckedKeys, checkedKeys) {\n  var filteredKeys = new Set();\n  halfCheckedKeys.forEach(function (key) {\n    if (!checkedKeys.has(key)) {\n      filteredKeys.add(key);\n    }\n  });\n  return filteredKeys;\n}\n\nfunction isCheckDisabled(node) {\n  var _ref = node || {},\n      disabled = _ref.disabled,\n      disableCheckbox = _ref.disableCheckbox,\n      checkable = _ref.checkable;\n\n  return !!(disabled || disableCheckbox) || checkable === false;\n} // Fill miss keys\n\n\nfunction fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(); // Add checked keys top to bottom\n\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n          node = entity.node,\n          _entity$children = entity.children,\n          children = _entity$children === void 0 ? [] : _entity$children;\n\n      if (checkedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.add(childEntity.key);\n        });\n      }\n    });\n  } // Add checked keys from bottom to top\n\n\n  var visitedKeys = new Set();\n\n  for (var _level = maxLevel; _level >= 0; _level -= 1) {\n    var _entities = levelEntities.get(_level) || new Set();\n\n    _entities.forEach(function (entity) {\n      var parent = entity.parent,\n          node = entity.node; // Skip if no need to check\n\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      } // Skip if parent is disabled\n\n\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref2) {\n        var key = _ref2.key;\n        var checked = checkedKeys.has(key);\n\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n\n      if (allChecked) {\n        checkedKeys.add(parent.key);\n      }\n\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n\n      visitedKeys.add(parent.key);\n    });\n  }\n\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n} // Remove useless key\n\n\nfunction cleanConductCheck(keys, halfKeys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(halfKeys); // Remove checked keys from top to bottom\n\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n          node = entity.node,\n          _entity$children2 = entity.children,\n          children = _entity$children2 === void 0 ? [] : _entity$children2;\n\n      if (!checkedKeys.has(key) && !halfCheckedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.delete(childEntity.key);\n        });\n      }\n    });\n  } // Remove checked keys form bottom to top\n\n\n  halfCheckedKeys = new Set();\n  var visitedKeys = new Set();\n\n  for (var _level2 = maxLevel; _level2 >= 0; _level2 -= 1) {\n    var _entities2 = levelEntities.get(_level2) || new Set();\n\n    _entities2.forEach(function (entity) {\n      var parent = entity.parent,\n          node = entity.node; // Skip if no need to check\n\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      } // Skip if parent is disabled\n\n\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref3) {\n        var key = _ref3.key;\n        var checked = checkedKeys.has(key);\n\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n\n      if (!allChecked) {\n        checkedKeys.delete(parent.key);\n      }\n\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n\n      visitedKeys.add(parent.key);\n    });\n  }\n\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n/**\n * Conduct with keys.\n * @param keyList current key list\n * @param keyEntities key - dataEntity map\n * @param mode `fill` to fill missing key, `clean` to remove useless key\n */\n\n\nfunction conductCheck(keyList, checked, keyEntities, getCheckDisabled) {\n  var warningMissKeys = [];\n  var syntheticGetCheckDisabled;\n\n  if (getCheckDisabled) {\n    syntheticGetCheckDisabled = getCheckDisabled;\n  } else {\n    syntheticGetCheckDisabled = isCheckDisabled;\n  } // We only handle exist keys\n\n\n  var keys = new Set(keyList.filter(function (key) {\n    var hasEntity = !!keyEntities[key];\n\n    if (!hasEntity) {\n      warningMissKeys.push(key);\n    }\n\n    return hasEntity;\n  }));\n  var levelEntities = new Map();\n  var maxLevel = 0; // Convert entities by level for calculation\n\n  Object.keys(keyEntities).forEach(function (key) {\n    var entity = keyEntities[key];\n    var level = entity.level;\n    var levelSet = levelEntities.get(level);\n\n    if (!levelSet) {\n      levelSet = new Set();\n      levelEntities.set(level, levelSet);\n    }\n\n    levelSet.add(entity);\n    maxLevel = Math.max(maxLevel, level);\n  });\n  (0, _warning.default)(!warningMissKeys.length, \"Tree missing follow keys: \".concat(warningMissKeys.slice(0, 100).map(function (key) {\n    return \"'\".concat(key, \"'\");\n  }).join(', ')));\n  var result;\n\n  if (checked === true) {\n    result = fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  } else {\n    result = cleanConductCheck(keys, checked.halfCheckedKeys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/home/abefernan/cosmwasm/dApps/node_modules/rc-tree/lib/utils/conductUtil.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","isCheckDisabled","conductCheck","_warning","removeFromCheckedKeys","halfCheckedKeys","checkedKeys","filteredKeys","Set","forEach","key","has","add","node","_ref","disabled","disableCheckbox","checkable","fillConductCheck","keys","levelEntities","maxLevel","syntheticGetCheckDisabled","level","entities","get","entity","_entity$children","children","filter","childEntity","visitedKeys","_level","_entities","parent","allChecked","partialChecked","_ref2","checked","Array","from","cleanConductCheck","halfKeys","_entity$children2","delete","_level2","_entities2","_ref3","keyList","keyEntities","getCheckDisabled","warningMissKeys","hasEntity","push","Map","levelSet","set","Math","max","default","length","concat","slice","map","join","result"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isCheckDisabled = isCheckDisabled;\nexports.conductCheck = conductCheck;\n\nvar _warning = _interopRequireDefault(require(\"rc-util/lib/warning\"));\n\nfunction removeFromCheckedKeys(halfCheckedKeys, checkedKeys) {\n  var filteredKeys = new Set();\n  halfCheckedKeys.forEach(function (key) {\n    if (!checkedKeys.has(key)) {\n      filteredKeys.add(key);\n    }\n  });\n  return filteredKeys;\n}\n\nfunction isCheckDisabled(node) {\n  var _ref = node || {},\n      disabled = _ref.disabled,\n      disableCheckbox = _ref.disableCheckbox,\n      checkable = _ref.checkable;\n\n  return !!(disabled || disableCheckbox) || checkable === false;\n} // Fill miss keys\n\n\nfunction fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(); // Add checked keys top to bottom\n\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n          node = entity.node,\n          _entity$children = entity.children,\n          children = _entity$children === void 0 ? [] : _entity$children;\n\n      if (checkedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.add(childEntity.key);\n        });\n      }\n    });\n  } // Add checked keys from bottom to top\n\n\n  var visitedKeys = new Set();\n\n  for (var _level = maxLevel; _level >= 0; _level -= 1) {\n    var _entities = levelEntities.get(_level) || new Set();\n\n    _entities.forEach(function (entity) {\n      var parent = entity.parent,\n          node = entity.node; // Skip if no need to check\n\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      } // Skip if parent is disabled\n\n\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref2) {\n        var key = _ref2.key;\n        var checked = checkedKeys.has(key);\n\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n\n      if (allChecked) {\n        checkedKeys.add(parent.key);\n      }\n\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n\n      visitedKeys.add(parent.key);\n    });\n  }\n\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n} // Remove useless key\n\n\nfunction cleanConductCheck(keys, halfKeys, levelEntities, maxLevel, syntheticGetCheckDisabled) {\n  var checkedKeys = new Set(keys);\n  var halfCheckedKeys = new Set(halfKeys); // Remove checked keys from top to bottom\n\n  for (var level = 0; level <= maxLevel; level += 1) {\n    var entities = levelEntities.get(level) || new Set();\n    entities.forEach(function (entity) {\n      var key = entity.key,\n          node = entity.node,\n          _entity$children2 = entity.children,\n          children = _entity$children2 === void 0 ? [] : _entity$children2;\n\n      if (!checkedKeys.has(key) && !halfCheckedKeys.has(key) && !syntheticGetCheckDisabled(node)) {\n        children.filter(function (childEntity) {\n          return !syntheticGetCheckDisabled(childEntity.node);\n        }).forEach(function (childEntity) {\n          checkedKeys.delete(childEntity.key);\n        });\n      }\n    });\n  } // Remove checked keys form bottom to top\n\n\n  halfCheckedKeys = new Set();\n  var visitedKeys = new Set();\n\n  for (var _level2 = maxLevel; _level2 >= 0; _level2 -= 1) {\n    var _entities2 = levelEntities.get(_level2) || new Set();\n\n    _entities2.forEach(function (entity) {\n      var parent = entity.parent,\n          node = entity.node; // Skip if no need to check\n\n      if (syntheticGetCheckDisabled(node) || !entity.parent || visitedKeys.has(entity.parent.key)) {\n        return;\n      } // Skip if parent is disabled\n\n\n      if (syntheticGetCheckDisabled(entity.parent.node)) {\n        visitedKeys.add(parent.key);\n        return;\n      }\n\n      var allChecked = true;\n      var partialChecked = false;\n      (parent.children || []).filter(function (childEntity) {\n        return !syntheticGetCheckDisabled(childEntity.node);\n      }).forEach(function (_ref3) {\n        var key = _ref3.key;\n        var checked = checkedKeys.has(key);\n\n        if (allChecked && !checked) {\n          allChecked = false;\n        }\n\n        if (!partialChecked && (checked || halfCheckedKeys.has(key))) {\n          partialChecked = true;\n        }\n      });\n\n      if (!allChecked) {\n        checkedKeys.delete(parent.key);\n      }\n\n      if (partialChecked) {\n        halfCheckedKeys.add(parent.key);\n      }\n\n      visitedKeys.add(parent.key);\n    });\n  }\n\n  return {\n    checkedKeys: Array.from(checkedKeys),\n    halfCheckedKeys: Array.from(removeFromCheckedKeys(halfCheckedKeys, checkedKeys))\n  };\n}\n/**\n * Conduct with keys.\n * @param keyList current key list\n * @param keyEntities key - dataEntity map\n * @param mode `fill` to fill missing key, `clean` to remove useless key\n */\n\n\nfunction conductCheck(keyList, checked, keyEntities, getCheckDisabled) {\n  var warningMissKeys = [];\n  var syntheticGetCheckDisabled;\n\n  if (getCheckDisabled) {\n    syntheticGetCheckDisabled = getCheckDisabled;\n  } else {\n    syntheticGetCheckDisabled = isCheckDisabled;\n  } // We only handle exist keys\n\n\n  var keys = new Set(keyList.filter(function (key) {\n    var hasEntity = !!keyEntities[key];\n\n    if (!hasEntity) {\n      warningMissKeys.push(key);\n    }\n\n    return hasEntity;\n  }));\n  var levelEntities = new Map();\n  var maxLevel = 0; // Convert entities by level for calculation\n\n  Object.keys(keyEntities).forEach(function (key) {\n    var entity = keyEntities[key];\n    var level = entity.level;\n    var levelSet = levelEntities.get(level);\n\n    if (!levelSet) {\n      levelSet = new Set();\n      levelEntities.set(level, levelSet);\n    }\n\n    levelSet.add(entity);\n    maxLevel = Math.max(maxLevel, level);\n  });\n  (0, _warning.default)(!warningMissKeys.length, \"Tree missing follow keys: \".concat(warningMissKeys.slice(0, 100).map(function (key) {\n    return \"'\".concat(key, \"'\");\n  }).join(', ')));\n  var result;\n\n  if (checked === true) {\n    result = fillConductCheck(keys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  } else {\n    result = cleanConductCheck(keys, checked.halfCheckedKeys, levelEntities, maxLevel, syntheticGetCheckDisabled);\n  }\n\n  return result;\n}"]},"metadata":{},"sourceType":"script"}