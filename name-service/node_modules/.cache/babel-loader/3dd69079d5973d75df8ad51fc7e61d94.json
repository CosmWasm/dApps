{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n/* eslint-disable no-param-reassign */\n\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null,\n      inMotion: false\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable',\n        inMotion: false\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // Update trigger to tell if is in motion\n\n\n      ['onEnterStart', 'onAppearStart', 'onLeaveStart'].forEach(function (event) {\n        var originFunc = mergedMotion === null || mergedMotion === void 0 ? void 0 : mergedMotion[event];\n\n        mergedMotion[event] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          originFunc === null || originFunc === void 0 ? void 0 : originFunc.apply(void 0, args);\n\n          _this.setState({\n            inMotion: true\n          });\n        };\n      }); // ================== Align ==================\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd,\n        leavedClassName: hiddenClassName\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status,\n          inMotion = _ref4.inMotion;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n        newState.inMotion = false;\n      } else if (visible !== prevVisible) {\n        newState.inMotion = false;\n\n        if (visible || supportMotion(mergedMotion) && inMotion) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */","map":{"version":3,"sources":["/home/abefernan/cosmwasm/dApps/node_modules/antd/node_modules/rc-trigger/es/Popup.js"],"names":["_objectWithoutProperties","_objectSpread","_classCallCheck","_createClass","_inherits","_createSuper","React","Component","raf","Align","composeRef","classNames","CSSMotion","PopupInner","getMotion","supportMotion","motion","motionName","Popup","_Component","_super","_this","apply","arguments","state","targetWidth","undefined","targetHeight","status","prevVisible","alignClassName","inMotion","popupRef","createRef","alignRef","nextFrameState","nextFrameId","onAlign","popupDomNode","align","_this$props","props","getClassNameFromAlign","setState","current","forceAlign","onMotionEnd","visible","setStateOnNextFrame","cancelFrameState","submitState","getAlignTarget","_this$props2","point","getRootDomNode","cancel","renderPopupElement","_this$state","_this$props3","prefixCls","className","style","stretch","destroyPopupOnHide","onMouseEnter","onMouseLeave","onMouseDown","onTouchStart","children","mergedClassName","hiddenClassName","concat","sizeStyle","indexOf","height","minHeight","width","minWidth","mergedStyle","getZIndexStyle","opacity","mergedMotion","mergedMotionVisible","motionAppear","motionEnter","motionLeave","forEach","event","originFunc","_len","length","args","Array","_key","mergedAlignDisabled","mergedPopupVisible","createElement","Object","assign","removeOnLeave","onEnterEnd","onLeaveEnd","leavedClassName","_ref","motionRef","motionStyle","motionClassName","target","key","ref","monitorWindowResize","disabled","renderMaskElement","_this$props4","mask","maskMotion","maskTransitionName","maskAnimation","transitionName","animation","_ref2","value","componentDidMount","componentDidUpdate","_this$props5","queue","index","nextStatus","$ele","offsetHeight","offsetWidth","componentWillUnmount","zIndex","render","getDerivedStateFromProps","_ref3","_ref4","newState"],"mappings":"AAAA,OAAOA,wBAAP,MAAqC,oDAArC;AACA,OAAOC,aAAP,MAA0B,0CAA1B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,YAAP,MAAyB,wCAAzB;AAEA;;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,SAAP,MAAsB,WAAtB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,SAAT,QAA0B,oBAA1B;;AAEA,SAASC,aAAT,CAAuBC,MAAvB,EAA+B;AAC7B,SAAOA,MAAM,IAAIA,MAAM,CAACC,UAAxB;AACD;;AAED,IAAIC,KAAK,GAAG,aAAa,UAAUC,UAAV,EAAsB;AAC7Cf,EAAAA,SAAS,CAACc,KAAD,EAAQC,UAAR,CAAT;;AAEA,MAAIC,MAAM,GAAGf,YAAY,CAACa,KAAD,CAAzB;;AAEA,WAASA,KAAT,GAAiB;AACf,QAAIG,KAAJ;;AAEAnB,IAAAA,eAAe,CAAC,IAAD,EAAOgB,KAAP,CAAf;;AAEAG,IAAAA,KAAK,GAAGD,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAR;AACAF,IAAAA,KAAK,CAACG,KAAN,GAAc;AACZC,MAAAA,WAAW,EAAEC,SADD;AAEZC,MAAAA,YAAY,EAAED,SAFF;AAGZE,MAAAA,MAAM,EAAE,IAHI;AAIZC,MAAAA,WAAW,EAAE,IAJD;AAKZC,MAAAA,cAAc,EAAE,IALJ;AAMZC,MAAAA,QAAQ,EAAE;AANE,KAAd;AAQAV,IAAAA,KAAK,CAACW,QAAN,GAAiB1B,KAAK,CAAC2B,SAAN,EAAjB;AACAZ,IAAAA,KAAK,CAACa,QAAN,GAAiB5B,KAAK,CAAC2B,SAAN,EAAjB;AACAZ,IAAAA,KAAK,CAACc,cAAN,GAAuB,IAAvB;AACAd,IAAAA,KAAK,CAACe,WAAN,GAAoB,IAApB;;AAEAf,IAAAA,KAAK,CAACgB,OAAN,GAAgB,UAAUC,YAAV,EAAwBC,KAAxB,EAA+B;AAC7C,UAAIX,MAAM,GAAGP,KAAK,CAACG,KAAN,CAAYI,MAAzB;AACA,UAAIY,WAAW,GAAGnB,KAAK,CAACoB,KAAxB;AAAA,UACIC,qBAAqB,GAAGF,WAAW,CAACE,qBADxC;AAAA,UAEIL,OAAO,GAAGG,WAAW,CAACH,OAF1B;AAGA,UAAIP,cAAc,GAAGY,qBAAqB,CAACH,KAAD,CAA1C;;AAEA,UAAIX,MAAM,KAAK,OAAf,EAAwB;AACtBP,QAAAA,KAAK,CAACsB,QAAN,CAAe;AACbb,UAAAA,cAAc,EAAEA,cADH;AAEbF,UAAAA,MAAM,EAAE;AAFK,SAAf,EAGG,YAAY;AACbP,UAAAA,KAAK,CAACa,QAAN,CAAeU,OAAf,CAAuBC,UAAvB;AACD,SALD;AAMD,OAPD,MAOO,IAAIjB,MAAM,KAAK,SAAf,EAA0B;AAC/BP,QAAAA,KAAK,CAACsB,QAAN,CAAe;AACbb,UAAAA,cAAc,EAAEA,cADH;AAEbF,UAAAA,MAAM,EAAE;AAFK,SAAf;;AAKAS,QAAAA,OAAO,CAACC,YAAD,EAAeC,KAAf,CAAP;AACD,OAPM,MAOA;AACLlB,QAAAA,KAAK,CAACsB,QAAN,CAAe;AACbb,UAAAA,cAAc,EAAEA;AADH,SAAf;AAGD;AACF,KA1BD;;AA4BAT,IAAAA,KAAK,CAACyB,WAAN,GAAoB,YAAY;AAC9B,UAAIC,OAAO,GAAG1B,KAAK,CAACoB,KAAN,CAAYM,OAA1B;;AAEA1B,MAAAA,KAAK,CAACsB,QAAN,CAAe;AACbf,QAAAA,MAAM,EAAEmB,OAAO,GAAG,aAAH,GAAmB,QADrB;AAEbhB,QAAAA,QAAQ,EAAE;AAFG,OAAf;AAID,KAPD;;AASAV,IAAAA,KAAK,CAAC2B,mBAAN,GAA4B,UAAUxB,KAAV,EAAiB;AAC3CH,MAAAA,KAAK,CAAC4B,gBAAN;;AAEA5B,MAAAA,KAAK,CAACc,cAAN,GAAuBlC,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKoB,KAAK,CAACc,cAAX,CAAd,EAA0CX,KAA1C,CAApC;AACAH,MAAAA,KAAK,CAACe,WAAN,GAAoB5B,GAAG,CAAC,YAAY;AAClC,YAAI0C,WAAW,GAAGjD,aAAa,CAAC,EAAD,EAAKoB,KAAK,CAACc,cAAX,CAA/B;;AAEAd,QAAAA,KAAK,CAACc,cAAN,GAAuB,IAAvB;;AAEAd,QAAAA,KAAK,CAACsB,QAAN,CAAeO,WAAf;AACD,OANsB,CAAvB;AAOD,KAXD;;AAaA7B,IAAAA,KAAK,CAACP,SAAN,GAAkB,YAAY;AAC5B,aAAOb,aAAa,CAAC,EAAD,EAAKa,SAAS,CAACO,KAAK,CAACoB,KAAP,CAAd,CAApB;AACD,KAFD,CArEe,CAuEZ;AACH;;;AAGApB,IAAAA,KAAK,CAAC8B,cAAN,GAAuB,YAAY;AACjC,UAAIC,YAAY,GAAG/B,KAAK,CAACoB,KAAzB;AAAA,UACIY,KAAK,GAAGD,YAAY,CAACC,KADzB;AAAA,UAEIC,cAAc,GAAGF,YAAY,CAACE,cAFlC;;AAIA,UAAID,KAAJ,EAAW;AACT,eAAOA,KAAP;AACD;;AAED,aAAOC,cAAP;AACD,KAVD;;AAYAjC,IAAAA,KAAK,CAAC4B,gBAAN,GAAyB,YAAY;AACnCzC,MAAAA,GAAG,CAAC+C,MAAJ,CAAWlC,KAAK,CAACe,WAAjB;AACD,KAFD;;AAIAf,IAAAA,KAAK,CAACmC,kBAAN,GAA2B,YAAY;AACrC,UAAIC,WAAW,GAAGpC,KAAK,CAACG,KAAxB;AAAA,UACII,MAAM,GAAG6B,WAAW,CAAC7B,MADzB;AAAA,UAEID,YAAY,GAAG8B,WAAW,CAAC9B,YAF/B;AAAA,UAGIF,WAAW,GAAGgC,WAAW,CAAChC,WAH9B;AAAA,UAIIK,cAAc,GAAG2B,WAAW,CAAC3B,cAJjC;AAKA,UAAI4B,YAAY,GAAGrC,KAAK,CAACoB,KAAzB;AAAA,UACIkB,SAAS,GAAGD,YAAY,CAACC,SAD7B;AAAA,UAEIC,SAAS,GAAGF,YAAY,CAACE,SAF7B;AAAA,UAGIC,KAAK,GAAGH,YAAY,CAACG,KAHzB;AAAA,UAIIC,OAAO,GAAGJ,YAAY,CAACI,OAJ3B;AAAA,UAKIf,OAAO,GAAGW,YAAY,CAACX,OAL3B;AAAA,UAMIR,KAAK,GAAGmB,YAAY,CAACnB,KANzB;AAAA,UAOIwB,kBAAkB,GAAGL,YAAY,CAACK,kBAPtC;AAAA,UAQIC,YAAY,GAAGN,YAAY,CAACM,YARhC;AAAA,UASIC,YAAY,GAAGP,YAAY,CAACO,YAThC;AAAA,UAUIC,WAAW,GAAGR,YAAY,CAACQ,WAV/B;AAAA,UAWIC,YAAY,GAAGT,YAAY,CAACS,YAXhC;AAAA,UAYIC,QAAQ,GAAGV,YAAY,CAACU,QAZ5B;AAaA,UAAIC,eAAe,GAAG1D,UAAU,CAACgD,SAAD,EAAYC,SAAZ,EAAuB9B,cAAvB,CAAhC;AACA,UAAIwC,eAAe,GAAG,GAAGC,MAAH,CAAUZ,SAAV,EAAqB,SAArB,CAAtB,CApBqC,CAoBkB;;AAEvD,UAAIa,SAAS,GAAG,EAAhB;;AAEA,UAAIV,OAAJ,EAAa;AACX;AACA,YAAIA,OAAO,CAACW,OAAR,CAAgB,QAAhB,MAA8B,CAAC,CAAnC,EAAsC;AACpCD,UAAAA,SAAS,CAACE,MAAV,GAAmB/C,YAAnB;AACD,SAFD,MAEO,IAAImC,OAAO,CAACW,OAAR,CAAgB,WAAhB,MAAiC,CAAC,CAAtC,EAAyC;AAC9CD,UAAAA,SAAS,CAACG,SAAV,GAAsBhD,YAAtB;AACD;;AAED,YAAImC,OAAO,CAACW,OAAR,CAAgB,OAAhB,MAA6B,CAAC,CAAlC,EAAqC;AACnCD,UAAAA,SAAS,CAACI,KAAV,GAAkBnD,WAAlB;AACD,SAFD,MAEO,IAAIqC,OAAO,CAACW,OAAR,CAAgB,UAAhB,MAAgC,CAAC,CAArC,EAAwC;AAC7CD,UAAAA,SAAS,CAACK,QAAV,GAAqBpD,WAArB;AACD;AACF;;AAED,UAAIqD,WAAW,GAAG7E,aAAa,CAACA,aAAa,CAACA,aAAa,CAACA,aAAa,CAAC,EAAD,EAAKuE,SAAL,CAAd,EAA+BnD,KAAK,CAAC0D,cAAN,EAA/B,CAAd,EAAsElB,KAAtE,CAAd,EAA4F,EAA5F,EAAgG;AAC7HmB,QAAAA,OAAO,EAAEpD,MAAM,KAAK,QAAX,IAAuB,CAACmB,OAAxB,GAAkCrB,SAAlC,GAA8C;AADsE,OAAhG,CAA/B,CAvCqC,CAyCjC;;;AAGJ,UAAIuD,YAAY,GAAG5D,KAAK,CAACP,SAAN,EAAnB;;AAEA,UAAIoE,mBAAmB,GAAGnC,OAA1B;;AAEA,UAAIA,OAAO,IAAInB,MAAM,KAAK,cAAtB,IAAwCA,MAAM,KAAK,QAAnD,IAA+DA,MAAM,KAAK,QAA9E,EAAwF;AACtFqD,QAAAA,YAAY,CAACE,YAAb,GAA4B,KAA5B;AACAF,QAAAA,YAAY,CAACG,WAAb,GAA2B,KAA3B;AACAH,QAAAA,YAAY,CAACI,WAAb,GAA2B,KAA3B;AACD;;AAED,UAAIzD,MAAM,KAAK,YAAX,IAA2BA,MAAM,KAAK,cAA1C,EAA0D;AACxDsD,QAAAA,mBAAmB,GAAG,KAAtB;AACD,OAxDoC,CAwDnC;;;AAGF,OAAC,cAAD,EAAiB,eAAjB,EAAkC,cAAlC,EAAkDI,OAAlD,CAA0D,UAAUC,KAAV,EAAiB;AACzE,YAAIC,UAAU,GAAGP,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,YAAY,CAACM,KAAD,CAAzF;;AAEAN,QAAAA,YAAY,CAACM,KAAD,CAAZ,GAAsB,YAAY;AAChC,eAAK,IAAIE,IAAI,GAAGlE,SAAS,CAACmE,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUH,IAAV,CAApC,EAAqDI,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGJ,IAA3E,EAAiFI,IAAI,EAArF,EAAyF;AACvFF,YAAAA,IAAI,CAACE,IAAD,CAAJ,GAAatE,SAAS,CAACsE,IAAD,CAAtB;AACD;;AAEDL,UAAAA,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAK,KAAK,CAA3C,GAA+C,KAAK,CAApD,GAAwDA,UAAU,CAAClE,KAAX,CAAiB,KAAK,CAAtB,EAAyBqE,IAAzB,CAAxD;;AAEAtE,UAAAA,KAAK,CAACsB,QAAN,CAAe;AACbZ,YAAAA,QAAQ,EAAE;AADG,WAAf;AAGD,SAVD;AAWD,OAdD,EA3DqC,CAyEjC;;AAEJ,UAAI+D,mBAAmB,GAAG,CAAC/C,OAAD,IAAYnB,MAAM,KAAK,OAAX,IAAsBA,MAAM,KAAK,SAAjC,IAA8CA,MAAM,KAAK,QAA/F,CA3EqC,CA2EoE;;AAEzG,UAAImE,kBAAkB,GAAG,IAAzB;;AAEA,UAAInE,MAAM,KAAK,QAAf,EAAyB;AACvBmE,QAAAA,kBAAkB,GAAGhD,OAArB;AACD,OAjFoC,CAiFnC;;;AAGF,UAAIgB,kBAAkB,IAAI,CAACgC,kBAA3B,EAA+C;AAC7C,eAAO,IAAP;AACD;;AAED,aAAOzF,KAAK,CAAC0F,aAAN,CAAoBpF,SAApB,EAA+BqF,MAAM,CAACC,MAAP,CAAc;AAClDnD,QAAAA,OAAO,EAAEmC;AADyC,OAAd,EAEnCD,YAFmC,EAErB;AACfkB,QAAAA,aAAa,EAAE,KADA;AAEfC,QAAAA,UAAU,EAAE/E,KAAK,CAACyB,WAFH;AAGfuD,QAAAA,UAAU,EAAEhF,KAAK,CAACyB,WAHH;AAIfwD,QAAAA,eAAe,EAAEhC;AAJF,OAFqB,CAA/B,EAOH,UAAUiC,IAAV,EAAgBC,SAAhB,EAA2B;AAC7B,YAAIC,WAAW,GAAGF,IAAI,CAAC1C,KAAvB;AAAA,YACI6C,eAAe,GAAGH,IAAI,CAAC3C,SAD3B;AAEA,eAAOtD,KAAK,CAAC0F,aAAN,CAAoBvF,KAApB,EAA2B;AAChCkG,UAAAA,MAAM,EAAEtF,KAAK,CAAC8B,cAAN,EADwB;AAEhCyD,UAAAA,GAAG,EAAE,OAF2B;AAGhCC,UAAAA,GAAG,EAAExF,KAAK,CAACa,QAHqB;AAIhC4E,UAAAA,mBAAmB,EAAE,IAJW;AAKhCC,UAAAA,QAAQ,EAAEjB,mBALsB;AAMhCvD,UAAAA,KAAK,EAAEA,KANyB;AAOhCF,UAAAA,OAAO,EAAEhB,KAAK,CAACgB;AAPiB,SAA3B,EAQJ/B,KAAK,CAAC0F,aAAN,CAAoBnF,UAApB,EAAgC;AACjC8C,UAAAA,SAAS,EAAEA,SADsB;AAEjCC,UAAAA,SAAS,EAAEjD,UAAU,CAAC0D,eAAD,EAAkBqC,eAAlB,CAFY;AAGjCG,UAAAA,GAAG,EAAEnG,UAAU,CAAC8F,SAAD,EAAYnF,KAAK,CAACW,QAAlB,CAHkB;AAIjCgC,UAAAA,YAAY,EAAEA,YAJmB;AAKjCC,UAAAA,YAAY,EAAEA,YALmB;AAMjCC,UAAAA,WAAW,EAAEA,WANoB;AAOjCC,UAAAA,YAAY,EAAEA,YAPmB;AAQjCN,UAAAA,KAAK,EAAE5D,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK6E,WAAL,CAAd,EAAiC2B,WAAjC;AARa,SAAhC,EASArC,QATA,CARI,CAAP;AAkBD,OA5BM,CAAP;AA6BD,KArHD;;AAuHA/C,IAAAA,KAAK,CAAC2F,iBAAN,GAA0B,YAAY;AACpC,UAAIC,YAAY,GAAG5F,KAAK,CAACoB,KAAzB;AAAA,UACIyE,IAAI,GAAGD,YAAY,CAACC,IADxB;AAAA,UAEIC,UAAU,GAAGF,YAAY,CAACE,UAF9B;AAAA,UAGIC,kBAAkB,GAAGH,YAAY,CAACG,kBAHtC;AAAA,UAIIC,aAAa,GAAGJ,YAAY,CAACI,aAJjC;AAAA,UAKI1D,SAAS,GAAGsD,YAAY,CAACtD,SAL7B;AAAA,UAMIZ,OAAO,GAAGkE,YAAY,CAAClE,OAN3B;;AAQA,UAAI,CAACmE,IAAL,EAAW;AACT,eAAO,IAAP;AACD;;AAED,UAAIlG,MAAM,GAAG,EAAb;;AAEA,UAAImG,UAAU,IAAIA,UAAU,CAAClG,UAA7B,EAAyC;AACvCD,QAAAA,MAAM,GAAGf,aAAa,CAAC;AACrBkF,UAAAA,YAAY,EAAE;AADO,SAAD,EAEnBrE,SAAS,CAAC;AACXE,UAAAA,MAAM,EAAEmG,UADG;AAEXxD,UAAAA,SAAS,EAAEA,SAFA;AAGX2D,UAAAA,cAAc,EAAEF,kBAHL;AAIXG,UAAAA,SAAS,EAAEF;AAJA,SAAD,CAFU,CAAtB;AAQD;;AAED,aAAO/G,KAAK,CAAC0F,aAAN,CAAoBpF,SAApB,EAA+BqF,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlF,MAAlB,EAA0B;AAC9D+B,QAAAA,OAAO,EAAEA,OADqD;AAE9DoD,QAAAA,aAAa,EAAE;AAF+C,OAA1B,CAA/B,EAGH,UAAUqB,KAAV,EAAiB;AACnB,YAAI5D,SAAS,GAAG4D,KAAK,CAAC5D,SAAtB;AACA,eAAOtD,KAAK,CAAC0F,aAAN,CAAoB,KAApB,EAA2B;AAChCnC,UAAAA,KAAK,EAAExC,KAAK,CAAC0D,cAAN,EADyB;AAEhC6B,UAAAA,GAAG,EAAE,MAF2B;AAGhChD,UAAAA,SAAS,EAAEjD,UAAU,CAAC,GAAG4D,MAAH,CAAUZ,SAAV,EAAqB,OAArB,CAAD,EAAgCC,SAAhC;AAHW,SAA3B,CAAP;AAKD,OAVM,CAAP;AAWD,KArCD;;AAuCA,WAAOvC,KAAP;AACD;;AAEDlB,EAAAA,YAAY,CAACe,KAAD,EAAQ,CAAC;AACnB0F,IAAAA,GAAG,EAAE,mBADc;AAEnBa,IAAAA,KAAK,EAAE,SAASC,iBAAT,GAA6B;AAClC,WAAKC,kBAAL;AACD;AAJkB,GAAD,EAKjB;AACDf,IAAAA,GAAG,EAAE,oBADJ;AAEDa,IAAAA,KAAK,EAAE,SAASE,kBAAT,GAA8B;AACnC,UAAI/F,MAAM,GAAG,KAAKJ,KAAL,CAAWI,MAAxB;AACA,UAAIgG,YAAY,GAAG,KAAKnF,KAAxB;AAAA,UACIa,cAAc,GAAGsE,YAAY,CAACtE,cADlC;AAAA,UAEIP,OAAO,GAAG6E,YAAY,CAAC7E,OAF3B;AAAA,UAGIe,OAAO,GAAG8D,YAAY,CAAC9D,OAH3B,CAFmC,CAKC;;AAEpC,WAAKb,gBAAL;;AAEA,UAAIF,OAAO,IAAInB,MAAM,KAAK,QAA1B,EAAoC;AAClC,gBAAQA,MAAR;AACE,eAAK,IAAL;AACE;AACE,mBAAKoB,mBAAL,CAAyB;AACvBpB,gBAAAA,MAAM,EAAEkC,OAAO,GAAG,SAAH,GAAe;AADP,eAAzB;AAGA;AACD;;AAEH,eAAK,YAAL;AACE;AACE,mBAAKd,mBAAL,CAAyB;AACvBpB,gBAAAA,MAAM,EAAEb,aAAa,CAAC,KAAKD,SAAL,EAAD,CAAb,GAAkC,cAAlC,GAAmD;AADpC,eAAzB;AAGA;AACD;;AAEH,eAAK,aAAL;AACE;AACE,mBAAKkC,mBAAL,CAAyB;AACvBpB,gBAAAA,MAAM,EAAE;AADe,eAAzB;AAGA;AACD;;AAEH;AACE;AACE;AACA,kBAAIiG,KAAK,GAAG,CAAC,SAAD,EAAY,OAAZ,EAAqB,IAArB,EAA2B,cAA3B,EAA2C,QAA3C,CAAZ;AACA,kBAAIC,KAAK,GAAGD,KAAK,CAACpD,OAAN,CAAc7C,MAAd,CAAZ;AACA,kBAAImG,UAAU,GAAGF,KAAK,CAACC,KAAK,GAAG,CAAT,CAAtB;;AAEA,kBAAIA,KAAK,KAAK,CAAC,CAAX,IAAgBC,UAApB,EAAgC;AAC9B,qBAAK/E,mBAAL,CAAyB;AACvBpB,kBAAAA,MAAM,EAAEmG;AADe,iBAAzB;AAGD;AACF;AArCL;AAuCD,OAjDkC,CAiDjC;;;AAGF,UAAInG,MAAM,KAAK,SAAf,EAA0B;AACxB,YAAIoG,IAAI,GAAG1E,cAAc,EAAzB;;AAEA,YAAI0E,IAAJ,EAAU;AACR,eAAKhF,mBAAL,CAAyB;AACvBrB,YAAAA,YAAY,EAAEqG,IAAI,CAACC,YADI;AAEvBxG,YAAAA,WAAW,EAAEuG,IAAI,CAACE;AAFK,WAAzB;AAID;AACF;AACF;AAhEA,GALiB,EAsEjB;AACDtB,IAAAA,GAAG,EAAE,sBADJ;AAEDa,IAAAA,KAAK,EAAE,SAASU,oBAAT,GAAgC;AACrC,WAAKlF,gBAAL;AACD;AAJA,GAtEiB,EA2EjB;AACD2D,IAAAA,GAAG,EAAE,gBADJ;AAEDa,IAAAA,KAAK,EAAE,SAAS1C,cAAT,GAA0B;AAC/B,UAAIqD,MAAM,GAAG,KAAK3F,KAAL,CAAW2F,MAAxB;AACA,aAAO;AACLA,QAAAA,MAAM,EAAEA;AADH,OAAP;AAGD;AAPA,GA3EiB,EAmFjB;AACDxB,IAAAA,GAAG,EAAE,QADJ;AAEDa,IAAAA,KAAK,EAAE,SAASY,MAAT,GAAkB;AACvB,aAAO/H,KAAK,CAAC0F,aAAN,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,KAAKgB,iBAAL,EAAjC,EAA2D,KAAKxD,kBAAL,EAA3D,CAAP;AACD;AAJA,GAnFiB,CAAR,EAwFR,CAAC;AACHoD,IAAAA,GAAG,EAAE,0BADF;AAEHa,IAAAA,KAAK,EAAE,SAASa,wBAAT,CAAkCC,KAAlC,EAAyCC,KAAzC,EAAgD;AACrD,UAAIzF,OAAO,GAAGwF,KAAK,CAACxF,OAApB;AAAA,UACIN,KAAK,GAAGzC,wBAAwB,CAACuI,KAAD,EAAQ,CAAC,SAAD,CAAR,CADpC;;AAGA,UAAI1G,WAAW,GAAG2G,KAAK,CAAC3G,WAAxB;AAAA,UACID,MAAM,GAAG4G,KAAK,CAAC5G,MADnB;AAAA,UAEIG,QAAQ,GAAGyG,KAAK,CAACzG,QAFrB;AAGA,UAAI0G,QAAQ,GAAG;AACb5G,QAAAA,WAAW,EAAEkB,OADA;AAEbnB,QAAAA,MAAM,EAAEA;AAFK,OAAf;AAIA,UAAIqD,YAAY,GAAGnE,SAAS,CAAC2B,KAAD,CAA5B;;AAEA,UAAIZ,WAAW,KAAK,IAAhB,IAAwBkB,OAAO,KAAK,KAAxC,EAA+C;AAC7C;AACA0F,QAAAA,QAAQ,CAAC7G,MAAT,GAAkB,QAAlB;AACA6G,QAAAA,QAAQ,CAAC1G,QAAT,GAAoB,KAApB;AACD,OAJD,MAIO,IAAIgB,OAAO,KAAKlB,WAAhB,EAA6B;AAClC4G,QAAAA,QAAQ,CAAC1G,QAAT,GAAoB,KAApB;;AAEA,YAAIgB,OAAO,IAAIhC,aAAa,CAACkE,YAAD,CAAb,IAA+BlD,QAA9C,EAAwD;AACtD0G,UAAAA,QAAQ,CAAC7G,MAAT,GAAkB,IAAlB;AACD,SAFD,MAEO;AACL6G,UAAAA,QAAQ,CAAC7G,MAAT,GAAkB,QAAlB;AACD;;AAED,YAAImB,OAAJ,EAAa;AACX0F,UAAAA,QAAQ,CAAC3G,cAAT,GAA0B,IAA1B;AACD;AACF;;AAED,aAAO2G,QAAP;AACD;AAlCE,GAAD,CAxFQ,CAAZ;;AA6HA,SAAOvH,KAAP;AACD,CA/XwB,CA+XvBX,SA/XuB,CAAzB;;AAiYA,eAAeW,KAAf;AACA","sourcesContent":["import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\n\n/* eslint-disable no-param-reassign */\nimport React, { Component } from 'react';\nimport raf from 'raf';\nimport Align from 'rc-align';\nimport { composeRef } from \"rc-util/es/ref\";\nimport classNames from 'classnames';\nimport CSSMotion from 'rc-motion';\nimport PopupInner from './PopupInner';\nimport { getMotion } from './utils/legacyUtil';\n\nfunction supportMotion(motion) {\n  return motion && motion.motionName;\n}\n\nvar Popup = /*#__PURE__*/function (_Component) {\n  _inherits(Popup, _Component);\n\n  var _super = _createSuper(Popup);\n\n  function Popup() {\n    var _this;\n\n    _classCallCheck(this, Popup);\n\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      targetWidth: undefined,\n      targetHeight: undefined,\n      status: null,\n      prevVisible: null,\n      alignClassName: null,\n      inMotion: false\n    };\n    _this.popupRef = React.createRef();\n    _this.alignRef = React.createRef();\n    _this.nextFrameState = null;\n    _this.nextFrameId = null;\n\n    _this.onAlign = function (popupDomNode, align) {\n      var status = _this.state.status;\n      var _this$props = _this.props,\n          getClassNameFromAlign = _this$props.getClassNameFromAlign,\n          onAlign = _this$props.onAlign;\n      var alignClassName = getClassNameFromAlign(align);\n\n      if (status === 'align') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'aligned'\n        }, function () {\n          _this.alignRef.current.forceAlign();\n        });\n      } else if (status === 'aligned') {\n        _this.setState({\n          alignClassName: alignClassName,\n          status: 'afterAlign'\n        });\n\n        onAlign(popupDomNode, align);\n      } else {\n        _this.setState({\n          alignClassName: alignClassName\n        });\n      }\n    };\n\n    _this.onMotionEnd = function () {\n      var visible = _this.props.visible;\n\n      _this.setState({\n        status: visible ? 'AfterMotion' : 'stable',\n        inMotion: false\n      });\n    };\n\n    _this.setStateOnNextFrame = function (state) {\n      _this.cancelFrameState();\n\n      _this.nextFrameState = _objectSpread(_objectSpread({}, _this.nextFrameState), state);\n      _this.nextFrameId = raf(function () {\n        var submitState = _objectSpread({}, _this.nextFrameState);\n\n        _this.nextFrameState = null;\n\n        _this.setState(submitState);\n      });\n    };\n\n    _this.getMotion = function () {\n      return _objectSpread({}, getMotion(_this.props));\n    }; // `target` on `rc-align` can accept as a function to get the bind element or a point.\n    // ref: https://www.npmjs.com/package/rc-align\n\n\n    _this.getAlignTarget = function () {\n      var _this$props2 = _this.props,\n          point = _this$props2.point,\n          getRootDomNode = _this$props2.getRootDomNode;\n\n      if (point) {\n        return point;\n      }\n\n      return getRootDomNode;\n    };\n\n    _this.cancelFrameState = function () {\n      raf.cancel(_this.nextFrameId);\n    };\n\n    _this.renderPopupElement = function () {\n      var _this$state = _this.state,\n          status = _this$state.status,\n          targetHeight = _this$state.targetHeight,\n          targetWidth = _this$state.targetWidth,\n          alignClassName = _this$state.alignClassName;\n      var _this$props3 = _this.props,\n          prefixCls = _this$props3.prefixCls,\n          className = _this$props3.className,\n          style = _this$props3.style,\n          stretch = _this$props3.stretch,\n          visible = _this$props3.visible,\n          align = _this$props3.align,\n          destroyPopupOnHide = _this$props3.destroyPopupOnHide,\n          onMouseEnter = _this$props3.onMouseEnter,\n          onMouseLeave = _this$props3.onMouseLeave,\n          onMouseDown = _this$props3.onMouseDown,\n          onTouchStart = _this$props3.onTouchStart,\n          children = _this$props3.children;\n      var mergedClassName = classNames(prefixCls, className, alignClassName);\n      var hiddenClassName = \"\".concat(prefixCls, \"-hidden\"); // ================== Style ==================\n\n      var sizeStyle = {};\n\n      if (stretch) {\n        // Stretch with target\n        if (stretch.indexOf('height') !== -1) {\n          sizeStyle.height = targetHeight;\n        } else if (stretch.indexOf('minHeight') !== -1) {\n          sizeStyle.minHeight = targetHeight;\n        }\n\n        if (stretch.indexOf('width') !== -1) {\n          sizeStyle.width = targetWidth;\n        } else if (stretch.indexOf('minWidth') !== -1) {\n          sizeStyle.minWidth = targetWidth;\n        }\n      }\n\n      var mergedStyle = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, sizeStyle), _this.getZIndexStyle()), style), {}, {\n        opacity: status === 'stable' || !visible ? undefined : 0\n      }); // ================= Motions =================\n\n\n      var mergedMotion = _this.getMotion();\n\n      var mergedMotionVisible = visible;\n\n      if (visible && status !== 'beforeMotion' && status !== 'motion' && status !== 'stable') {\n        mergedMotion.motionAppear = false;\n        mergedMotion.motionEnter = false;\n        mergedMotion.motionLeave = false;\n      }\n\n      if (status === 'afterAlign' || status === 'beforeMotion') {\n        mergedMotionVisible = false;\n      } // Update trigger to tell if is in motion\n\n\n      ['onEnterStart', 'onAppearStart', 'onLeaveStart'].forEach(function (event) {\n        var originFunc = mergedMotion === null || mergedMotion === void 0 ? void 0 : mergedMotion[event];\n\n        mergedMotion[event] = function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          originFunc === null || originFunc === void 0 ? void 0 : originFunc.apply(void 0, args);\n\n          _this.setState({\n            inMotion: true\n          });\n        };\n      }); // ================== Align ==================\n\n      var mergedAlignDisabled = !visible || status !== 'align' && status !== 'aligned' && status !== 'stable'; // ================== Popup ==================\n\n      var mergedPopupVisible = true;\n\n      if (status === 'stable') {\n        mergedPopupVisible = visible;\n      } // Only remove popup since mask may still need animation\n\n\n      if (destroyPopupOnHide && !mergedPopupVisible) {\n        return null;\n      }\n\n      return React.createElement(CSSMotion, Object.assign({\n        visible: mergedMotionVisible\n      }, mergedMotion, {\n        removeOnLeave: false,\n        onEnterEnd: _this.onMotionEnd,\n        onLeaveEnd: _this.onMotionEnd,\n        leavedClassName: hiddenClassName\n      }), function (_ref, motionRef) {\n        var motionStyle = _ref.style,\n            motionClassName = _ref.className;\n        return React.createElement(Align, {\n          target: _this.getAlignTarget(),\n          key: \"popup\",\n          ref: _this.alignRef,\n          monitorWindowResize: true,\n          disabled: mergedAlignDisabled,\n          align: align,\n          onAlign: _this.onAlign\n        }, React.createElement(PopupInner, {\n          prefixCls: prefixCls,\n          className: classNames(mergedClassName, motionClassName),\n          ref: composeRef(motionRef, _this.popupRef),\n          onMouseEnter: onMouseEnter,\n          onMouseLeave: onMouseLeave,\n          onMouseDown: onMouseDown,\n          onTouchStart: onTouchStart,\n          style: _objectSpread(_objectSpread({}, mergedStyle), motionStyle)\n        }, children));\n      });\n    };\n\n    _this.renderMaskElement = function () {\n      var _this$props4 = _this.props,\n          mask = _this$props4.mask,\n          maskMotion = _this$props4.maskMotion,\n          maskTransitionName = _this$props4.maskTransitionName,\n          maskAnimation = _this$props4.maskAnimation,\n          prefixCls = _this$props4.prefixCls,\n          visible = _this$props4.visible;\n\n      if (!mask) {\n        return null;\n      }\n\n      var motion = {};\n\n      if (maskMotion && maskMotion.motionName) {\n        motion = _objectSpread({\n          motionAppear: true\n        }, getMotion({\n          motion: maskMotion,\n          prefixCls: prefixCls,\n          transitionName: maskTransitionName,\n          animation: maskAnimation\n        }));\n      }\n\n      return React.createElement(CSSMotion, Object.assign({}, motion, {\n        visible: visible,\n        removeOnLeave: true\n      }), function (_ref2) {\n        var className = _ref2.className;\n        return React.createElement(\"div\", {\n          style: _this.getZIndexStyle(),\n          key: \"mask\",\n          className: classNames(\"\".concat(prefixCls, \"-mask\"), className)\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Popup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.componentDidUpdate();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      var status = this.state.status;\n      var _this$props5 = this.props,\n          getRootDomNode = _this$props5.getRootDomNode,\n          visible = _this$props5.visible,\n          stretch = _this$props5.stretch; // If there is a pending state update, cancel it, a new one will be set if necessary\n\n      this.cancelFrameState();\n\n      if (visible && status !== 'stable') {\n        switch (status) {\n          case null:\n            {\n              this.setStateOnNextFrame({\n                status: stretch ? 'measure' : 'align'\n              });\n              break;\n            }\n\n          case 'afterAlign':\n            {\n              this.setStateOnNextFrame({\n                status: supportMotion(this.getMotion()) ? 'beforeMotion' : 'stable'\n              });\n              break;\n            }\n\n          case 'AfterMotion':\n            {\n              this.setStateOnNextFrame({\n                status: 'stable'\n              });\n              break;\n            }\n\n          default:\n            {\n              // Go to next status\n              var queue = ['measure', 'align', null, 'beforeMotion', 'motion'];\n              var index = queue.indexOf(status);\n              var nextStatus = queue[index + 1];\n\n              if (index !== -1 && nextStatus) {\n                this.setStateOnNextFrame({\n                  status: nextStatus\n                });\n              }\n            }\n        }\n      } // Measure stretch size\n\n\n      if (status === 'measure') {\n        var $ele = getRootDomNode();\n\n        if ($ele) {\n          this.setStateOnNextFrame({\n            targetHeight: $ele.offsetHeight,\n            targetWidth: $ele.offsetWidth\n          });\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cancelFrameState();\n    }\n  }, {\n    key: \"getZIndexStyle\",\n    value: function getZIndexStyle() {\n      var zIndex = this.props.zIndex;\n      return {\n        zIndex: zIndex\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.renderMaskElement(), this.renderPopupElement());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(_ref3, _ref4) {\n      var visible = _ref3.visible,\n          props = _objectWithoutProperties(_ref3, [\"visible\"]);\n\n      var prevVisible = _ref4.prevVisible,\n          status = _ref4.status,\n          inMotion = _ref4.inMotion;\n      var newState = {\n        prevVisible: visible,\n        status: status\n      };\n      var mergedMotion = getMotion(props);\n\n      if (prevVisible === null && visible === false) {\n        // Init render should always be stable\n        newState.status = 'stable';\n        newState.inMotion = false;\n      } else if (visible !== prevVisible) {\n        newState.inMotion = false;\n\n        if (visible || supportMotion(mergedMotion) && inMotion) {\n          newState.status = null;\n        } else {\n          newState.status = 'stable';\n        }\n\n        if (visible) {\n          newState.alignClassName = null;\n        }\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Popup;\n}(Component);\n\nexport default Popup;\n/* eslint-enable */"]},"metadata":{},"sourceType":"module"}