(this["webpackJsonpname-service"]=this["webpackJsonpname-service"]||[]).push([[0],{235:function(e,t){},324:function(e,t,a){e.exports=a.p+"static/media/backArrow.9849fc2e.svg"},337:function(e,t,a){e.exports=a.p+"static/media/cosmWasmLogo.15dccd19.svg"},338:function(e,t,a){e.exports=a.p+"static/media/failIcon.71513020.svg"},339:function(e,t,a){e.exports=a.p+"static/media/successIcon.2e305b66.svg"},343:function(e,t,a){e.exports=a(736)},348:function(e,t,a){},364:function(e,t){},366:function(e,t){},376:function(e,t){},378:function(e,t){},420:function(e,t){},421:function(e,t){},426:function(e,t){},428:function(e,t){},452:function(e,t){},531:function(e,t,a){},532:function(e,t,a){},533:function(e,t,a){},536:function(e,t,a){},599:function(e,t,a){},730:function(e,t,a){},731:function(e,t,a){},732:function(e,t,a){},733:function(e,t,a){},734:function(e,t,a){},735:function(e,t,a){},736:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(348),a(323)),i=a(60),l=a(102),u=a(61),m={setError:function(){},clearError:function(){}},f=Object(n.createContext)(m),d=function(){return Object(n.useContext)(f)};function h(e){var t=e.children,a=Object(n.useState)(),r=a[0],c=a[1],o={error:r,setError:c,clearError:function(){c(void 0)}};return Object(n.createElement)(f.Provider,{value:o},t)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function g(e){if(!e)return"0";if(e.denom.startsWith("u")){var t=e.denom.slice(1).toUpperCase();return u.Decimal.fromAtomics(e.amount,6).toString()+"\u202f"+t}return e.amount+"\u202f"+e.denom}function p(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var a=i.Bip39.encode(i.Random.getBytes(16)).toString();return localStorage.setItem(e,a),a}var b=function(e,t){try{return Promise.resolve(t.getAccounts()).then((function(a){var n=a[0].address,r=function(e){var t=e.feeToken,a=e.gasPrice,n=function(e,t,a){return{amount:[{amount:Math.floor(e*a).toString(),denom:t}],gas:e.toString()}};return{upload:n(15e5,t,a),init:n(6e5,t,a),exec:n(2e5,t,a),migrate:n(6e5,t,a),send:n(8e4,t,a),changeAdmin:n(8e4,t,a)}}(e);return new s.SigningCosmWasmClient(e.httpUrl,n,t,r)}))}catch(a){return Promise.reject(a)}},v=function(e){try{var t=p(),a=Object(l.makeCosmoshubPath)(0);return Promise.resolve(l.Secp256k1Wallet.fromMnemonic(t,a,e))}catch(n){return Promise.reject(n)}},S={initialized:!1,address:"",init:function(){},getClient:function(){throw new Error("not yet initialized")}},x=Object(n.createContext)(S),O=function(){return Object(n.useContext)(x)};function j(e){var t=e.config,a=e.loadWallet,r=e.children,c=E({},S,{init:function(){a(t.addressPrefix).then((function(e){return b(t,e)})).then((function(e){try{var a=function(){i({initialized:!0,address:n,init:function(){},getClient:function(){return e}})},n=e.senderAddress,r=function(){if(t.faucetUrl)return Promise.resolve(e.getAccount()).then((function(e){var a=function(){var a;if(!(null===e||void 0===e||null===(a=e.balance)||void 0===a?void 0:a.length))return Promise.resolve(fetch(t.faucetUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticker:t.faucetToken,address:n})})).then((function(){}))}();if(a&&a.then)return a.then((function(){}))}))}();return Promise.resolve(r&&r.then?r.then(a):a())}catch(c){return Promise.reject(c)}}))}}),o=Object(n.useState)(c),s=o[0],i=o[1];return Object(n.createElement)(x.Provider,{value:s},r)}function N(e){var t=e.config,a=e.children;return Object(n.createElement)(j,{config:t,loadWallet:v},a)}var T={refreshAccount:function(){}},y=Object(n.createContext)(T),C=function(){return Object(n.useContext)(y)};function A(e){var t=e.children,a=d().setError,r=O(),c=Object(n.useState)({}),o=c[0],s=c[1];function i(){r.initialized&&r.getClient().getAccount().then((function(e){return s({account:e})})).catch(a)}Object(n.useEffect)(i,[r,a]);var l={refreshAccount:i,account:o.account};return Object(n.createElement)(y.Provider,{value:l},t)}function B(e){var t=(e||"").toString().match(/.*\s*$/g)[0];return t.substring(0,t.lastIndexOf(";"))}var k=a(53),P=a(17);const w={httpUrl:"https://lcd.coralnet.cosmwasm.com",feeToken:"ushell",gasPrice:.025,faucetUrl:"https://faucet.coralnet.cosmwasm.com/credit",faucetToken:"SHELL",addressPrefix:"coral",codeId:5};var $=function({children:e,location:t}){const{initialized:a}=O();return a?r.a.createElement(P.d,{location:t},e):r.a.createElement(P.a,{to:{pathname:"/login",state:{redirectPathname:t.pathname,redirectState:t.state}}})},L=(a(84),a(26)),R=a.n(L),z=a(3),I=a.n(z);a(531);var W=function({tag:e="div",className:t,children:a,...r}){const c=I()("Center",t);return n.createElement(e,Object.assign({className:c},r),a)};a(532);var q=function({tag:e="div",className:t,children:a,...r}){const c=I()("Stack",t);return n.createElement(e,Object.assign({className:c},r),a)},U=a(324),M=a.n(U);a(533);var H=function({path:e}){const t=Object(P.g)(),a=e?()=>t.push(e):t.goBack;return r.a.createElement("img",{src:M.a,alt:"Back arrow",className:"BackButton",onClick:a})},V=(a(534),a(327)),_=a.n(V),J=a(743);a(536);const D=r.a.createElement(J.a,{style:{fontSize:"6.25rem"},spin:!0});var F=function({loadingText:e}){const t=e||"Loading...";return r.a.createElement(W,{tag:"main",className:"Loading"},r.a.createElement(_.a,{indicator:D,tip:t,className:"Spin"}))},Y=(a(85),a(32)),K=a.n(Y),G=(a(597),a(332)),Q=a.n(G),X=a(153),Z=a.n(X);a(599);const{Title:ee,Text:te}=R.a;var ae=function(e){const t=C();return r.a.createElement(W,Object.assign({className:"YourAccount"},e),r.a.createElement(q,null,r.a.createElement("header",null,r.a.createElement(ee,{level:3},"Your Account"),r.a.createElement(Q.a,null)),t.account&&r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null,r.a.createElement(te,null,t.account.address),r.a.createElement(te,null,"(",(a=t.account.balance)&&0!==a.length?a.map(g).join(", "):"\u2013",")")),r.a.createElement(K.a,{type:"primary",onClick:()=>Z()(t.account.address)},"Copy Account Address"))));var a},ne=a(36),re=a(741),ce=a(336),oe=(a(188),a(90)),se=a.n(oe),ie=a(167);const le=n.forwardRef(({name:e,validate:t,fast:a,onChange:r,onBlur:c,...o},s)=>n.createElement(ie.a,{name:e,validate:t,fast:a},({field:{value:t,onChange:a,onBlur:i}})=>n.createElement(se.a,Object.assign({ref:s,name:e,value:t,onChange:e=>{a(e),r&&r(e)},onBlur:e=>{i(e),c&&c(e)}},o))));le.Search=n.forwardRef(({name:e,validate:t,fast:a,onChange:r,onBlur:c,...o},s)=>n.createElement(ie.a,{name:e,validate:t,fast:a},({field:{value:t,onChange:a,onBlur:i}})=>n.createElement(se.a.Search,Object.assign({ref:s,name:e,value:t,onChange:e=>{a(e),r&&r(e)},onBlur:e=>{i(e),c&&c(e)}},o))));var ue=le.Search,me=a(131);const fe=me.a().shape({name:me.b().min(4,"Name can not be less than 4 characters").required("A Name is required")}),de=new RegExp("^"+w.addressPrefix),he=me.a().shape({address:me.b().required("An address is required").matches(de,`"${w.addressPrefix}" prefix required`).length(39+w.addressPrefix.length,"Address invalid")});var Ee=function({initialName:e,setSearchedName:t}){return r.a.createElement(ne.c,{initialValues:{name:e},validationSchema:fe,onSubmit:e=>{t(e.name)}},e=>r.a.createElement(re.a,null,r.a.createElement(ce.a,{name:"name"},r.a.createElement(ue,{name:"name",placeholder:"Name",enterButton:!0,onSearch:a=>{e.isValid&&t(a)}}))))};a(730);const{Text:ge}=R.a;var pe=function({contractLabel:e,contractAddress:t,name:a,setLoading:c}){const o=`/contract/${e}/${t}/${a}`,s=Object(P.g)(),{setError:i,error:l}=d(),{getClient:u}=O(),m=C(),[f,h]=Object(n.useState)(""),[E,p]=Object(n.useState)({});Object(n.useEffect)(()=>{u().queryContractSmart(t,{resolve_record:{name:a}}).then(e=>{h(e.address)}).catch(e=>{e.toString().includes("NameRecord not found")||i(e)})},[i,t,u,a]),Object(n.useEffect)(()=>{u().queryContractSmart(t,{config:{}}).then(e=>{p({purchase:e.purchase_price,transfer:e.transfer_price})}).catch(i)},[i,t,u]);const{message:b,actionText:v,action:S}=function(e,t,a,n,r){return t?e===t?{message:"is owned by you !",actionText:"Transfer "+g(a.transfer),action:r}:{message:"is owned by "+t,actionText:"Copy Owner Address",action:()=>{Z()(t)}}:{message:"is available!",actionText:"Register "+g(a.purchase),action:n}}(m.account.address,f,E,(function(){c(!0);const e=E.purchase,n=e?[e]:void 0;u().execute(t,{register:{name:a}},"Buying my name",n).then(()=>{m.refreshAccount(),s.push({pathname:"/result",state:{success:!0,message:"Succesfully registered "+a,customButtonText:"Name details",customButtonActionPath:o}})}).catch(e=>{console.error(e),s.push({pathname:"/result",state:{success:!1,message:"Name register failed:",error:B(e),customButtonActionPath:o}})})}),(function(){s.push(`/transfer/${e}/${t}/${a}`)}));return r.a.createElement(W,{tag:"main",className:"SearchResult"},r.a.createElement(q,null,r.a.createElement(ge,null,l),r.a.createElement(ge,{className:"SearchedName"},a),r.a.createElement(ge,{className:"LightText"},b),r.a.createElement(K.a,{type:"primary",onClick:S},v)))};a(731);const{Title:be,Text:ve}=R.a;var Se=function(){const{label:e,address:t,name:a}=Object(P.h)(),[c,o]=Object(n.useState)(!1),[s,i]=Object(n.useState)(a);return c&&r.a.createElement(F,{loadingText:`Registering name: ${s}...`})||!c&&r.a.createElement(W,{tag:"main",className:"Contract"},r.a.createElement(q,null,r.a.createElement(H,{path:"/home"}),r.a.createElement(q,{className:"SearchAndResultStack"},r.a.createElement(q,{className:"SearchStack"},r.a.createElement(be,null,e),r.a.createElement(ve,null,"(",t,")"),r.a.createElement(Ee,{initialName:a,setSearchedName:function(e){i(e.toLowerCase())}})),s&&r.a.createElement(pe,{contractLabel:e,contractAddress:t,name:s,setLoading:o})),r.a.createElement(ae,{tag:"footer"})))};a(732);const{Title:xe}=R.a;var Oe=function(){const{setError:e}=d(),{getClient:t}=O(),[a,c]=Object(n.useState)([]);return Object(n.useEffect)(()=>{t().getContracts(w.codeId).then(e=>c(e)).catch(e)},[t,e]),r.a.createElement(W,{tag:"main",className:"Home"},r.a.createElement(q,null,r.a.createElement(xe,null,"Name Service"),r.a.createElement(q,{tag:"nav"},a.map(({label:e,address:t})=>r.a.createElement(k.b,{key:t,to:`/contract/${e.toLowerCase()}/${t}`},r.a.createElement(K.a,{type:"primary"},e)))),r.a.createElement(ae,{tag:"footer"})))},je=a(337),Ne=a.n(je);a(733);const{Title:Te,Text:ye}=R.a;var Ce=function(){const e=Object(P.g)(),t=e.location.state,a=O(),{refreshAccount:c,account:o}=C(),[s,i]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{a.initialized&&c()},[a.initialized,c]),Object(n.useEffect)(()=>{o&&(t?e.push(t.redirectPathname,t.redirectState):e.push("/home"))},[o,t,e]),s?r.a.createElement(F,{loadingText:"Initializing app..."}):r.a.createElement(W,{tag:"main",className:"Login"},r.a.createElement(q,{className:"MainStack"},r.a.createElement("img",{src:Ne.a,alt:"CosmWasm logo"}),r.a.createElement(q,{className:"WelcomeStack"},r.a.createElement(R.a,null,r.a.createElement(Te,{level:2},"Hello!"),r.a.createElement(ye,{className:"LightText"},"Welcome to your Name service"),r.a.createElement(ye,{className:"LightText"},"Select one of the following options to start:")),r.a.createElement(K.a,{type:"primary",onClick:function(){i(!0),a.init()}},"Browser (Demo)"),r.a.createElement(K.a,{disabled:!0,type:"primary"},"Keplr (Secure)"))))},Ae=a(338),Be=a.n(Ae),ke=a(339),Pe=a.n(ke);a(734);const{Text:we}=R.a;var $e=function(){const e=Object(P.g)(),{success:t,message:a,error:n,customButtonText:c,customButtonActionPath:o}=e.location.state,{icon:s,textClass:i,buttonText:l,buttonAction:u}=function(e,t){return e?{icon:Pe.a,textClass:"SuccessText",buttonText:"Home",buttonAction:()=>function(e){e.push("/home")}(t)}:{icon:Be.a,textClass:"FailText",buttonText:"Retry",buttonAction:t.goBack}}(t,e),m=c||l,f=o?()=>e.push(o):u;return r.a.createElement(W,{tag:"main",className:"OperationResult"},r.a.createElement(q,{className:"MainStack"},r.a.createElement("img",{src:s,alt:"Result icon"}),r.a.createElement(we,{className:i},a),n&&r.a.createElement(we,{className:i},n),r.a.createElement(K.a,{type:"primary",onClick:f},m)))},Le=a(742);var Re=function({setNewOwnerAddress:e,transferButtonText:t,transferButtonAction:a}){return r.a.createElement(ne.c,{initialValues:{address:""},validationSchema:he,onSubmit:a},n=>r.a.createElement(re.a,null,r.a.createElement(ce.a,{name:"address"},r.a.createElement(Le.a,{name:"address",placeholder:"Enter address",onChange:t=>{e(t.target.value)}})),r.a.createElement(K.a,{type:"primary",onClick:a,disabled:!(n.isValid&&n.dirty)},t)))};a(735);const{Title:ze,Text:Ie}=R.a;var We=function(){const{contractLabel:e,contractAddress:t,name:a}=Object(P.h)(),c=`/contract/${e}/${t}/${a}`,o=Object(P.g)(),{setError:s}=d(),{getClient:i}=O(),l=C(),[u,m]=Object(n.useState)(!1),[f,h]=Object(n.useState)(""),[E,p]=Object(n.useState)();return Object(n.useEffect)(()=>{i().queryContractSmart(t,{config:{}}).then(e=>{p(e.transfer_price)}).catch(s)},[s,t,i]),u&&r.a.createElement(F,{loadingText:`Transferring name: ${a}...`})||!u&&r.a.createElement(W,{tag:"main",className:"Transfer"},r.a.createElement(q,null,r.a.createElement(H,{path:c}),r.a.createElement(q,{className:"TransferStack"},r.a.createElement(ze,null,"Transfer"),r.a.createElement(R.a,null,r.a.createElement(Ie,null,"Name: "),r.a.createElement(Ie,null,a)),r.a.createElement(Ie,null,"to"),r.a.createElement(Re,{setNewOwnerAddress:h,transferButtonText:"Transfer "+g(E),transferButtonAction:function(){m(!0);const n=E?[E]:void 0;i().execute(t,{transfer:{name:a,to:f}},"Transferring my name",n).then(()=>{l.refreshAccount(),o.push({pathname:"/result",state:{success:!0,message:`Succesfully transferred ${a} to ${f}`,customButtonText:"Name details",customButtonActionPath:c}})}).catch(n=>{console.error(n),o.push({pathname:"/result",state:{success:!1,message:"Name transfer failed:",error:B(n),customButtonActionPath:`/transfer/${e}/${t}/${a}`}})})}})),r.a.createElement(ae,{tag:"footer"})))};var qe=function(){return r.a.createElement(h,null,r.a.createElement(N,{config:w},r.a.createElement(A,null,r.a.createElement(k.a,{basename:"/names"},r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/",component:Ce}),r.a.createElement(P.b,{exact:!0,path:"/login",component:Ce}),r.a.createElement($,null,r.a.createElement(P.b,{exact:!0,path:"/home",component:Oe}),r.a.createElement(P.b,{exact:!0,path:"/contract/:label/:address/:name?",component:Se}),r.a.createElement(P.b,{exact:!0,path:"/transfer/:contractLabel/:contractAddress/:name",component:We}),r.a.createElement(P.b,{exact:!0,path:"/result",component:$e})))))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qe,null)),document.getElementById("root"))}},[[343,1,2]]]);
//# sourceMappingURL=main.d3dc325f.chunk.js.map